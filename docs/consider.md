# 구현전 생각해보기

## 기능 요구 사항

결제 시스템을 구현하는데 재고 관리/ 프로모션 할인 / 멤버십 할인등 물건을 구매하는 과정에서 거쳐가는게 많다.
이거 완전 객체지향적으로 작성하지 않으면 분명히 헷갈리고 복잡해질 것 같다.

대략 흐름 구상

1. 환영메시지
2. 재고 출력 (md 파일 그대로)
3. 구매하실 상품명과 수량 입력 받기
    - 예외상황이라면 error 출력후 다시 입력
    - 프로모션 적용가능한 상품에 대해 고객이 해당 수량만큼 가져오지 않았을 경우 안내 메시지 출력
    - 프로모션 재고가 부족하다면 일부 수량에 대해 정가로 결제할지 여부 안내
4. 멤버십 할인 적용 여부를 확인
5. 구매 상품 내역, 증정 상품 내역, 금액 정보 출력
6. 추가 구매 여부 확인

### 재고 관리

- 재고관리는 프로그램이 완전 종료될 때 까지 초기화되지 않도록 설계

### 프로모션

- 같은 상품이지만 프로모션하는게 있고 하지 않는게 있다 이를 구분할 수 있는 장치가 필요하다.
- 2+1이지만 1개밖에없다면 그냥 정가로 구매해야함

### 영수증 출력

- 구매한 상품명/수량/가격 - > 객체로 가지고 있다가 출력
- 증정 상품 내역 -> 프로모션 적용된거를 따로 객체내에 변수로 저장하고 있자

### 기타

Y/N 이 많으니까 따로 유틸 유효성 메서드를 만들자

### 프로모션 정리

이 부분이 가장 복잡한 것 같다.

- 프로모션 적용이 가능한 상품에 대해 고객이 해당 수량보다 적게 가져온 경우, 그 수량만큼 추가 여부를 입력받는다.
    - Y: 증정 받을 수 있는 상품을 추가한다.
    - N: 증정 받을 수 있는 상품을 추가하지 않는다.

- 프로모션 재고가 부족하여 일부 수량을 프로모션 혜택 없이 결제해야 하는 경우, 일부 수량에 대해 정가로 결제할지 여부를 입력받는다.
    - Y: 일부 수량에 대해 정가로 결제한다.
    - N: 정가로 결제해야하는 수량만큼 제외한 후 결제를 진행한다.

#### 예제 1) 2+1이고 재고가 3개일때

1개 구매시 : 그냥 구매
2개 구매시 : 1개를 더 무료로 받을 수 있다고 안내
3개 구매시 : 그냥 구매

여기서 1개 구매시에는 따로 안내를 하지 않는다
why? 문제조건에 Y/N에따라 증정 받을 수 있는 상품을 추가하거나 추가하지 않는다. 1개 구매는 프로모션 적용 가능한 수량이 아니다  
믈론 물건 자체는 프로모션 적용 가능한 상품이긴 하지만 수량이 해당되지 않아서 안내가 되지 않는다. Y/N은 증정품을 받을 수 있냐 없냐이지  
1개를 더 구매하시면 1개를 무료로 받을 수 있다를 안내하는게 아니다.

#### 예제 2) 2+1이고 프로모션 재고가 5개일 프로모션 재고가 0개 때

1/2/3 개 구매시 1예제와 동일
4개 구매시 : 그냥 그매
5개 구매시 : 증정 1개 더 무료로 받을 수 있다고 안내 but 재고가 없음 그래서 물량이 부족하여 일부 수량을 프로모션 혜택 없이 결제해야한다고 안내
6개 구매시 : 에러

#### 예제 3) 2+1이고 프로모션 재고가 3개 일반 재고가 2개일 때

1/2/3개 구매시 1예제와 동일
4개 구매시 : 프로모션 3개 일반 1개 소진
5개 구매시 : 물량 부족 안내하고 YES라면 프로모션 3개 구매와 일반 2개 구매 NO라면 프로모션 3개 구매
6개 구매시 : 에러
